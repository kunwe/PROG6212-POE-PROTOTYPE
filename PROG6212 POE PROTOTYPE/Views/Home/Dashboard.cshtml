@{
    ViewData["Title"] = "Dashboard - PROG6212_POE_PROTOTYPE";
    string userRole = ViewBag.UserRole;
}

<h1 class="display-4">@userRole Dashboard</h1>
<hr />

@if (userRole == "Lecturer")
{
    <!-- LECTURER DASHBOARD -->
    <div class="row">
        <div class="col-12 mb-4">
            <a asp-action="Create" asp-controller="Claims" class="btn btn-success btn-lg">Submit New Monthly Claim</a>
        </div>
    </div>

    <div class="row">
        <div class="col-12">
            <h3>Your Previous Claims</h3>
            <table class="table table-striped table-hover">
                <thead class="table-dark">
                    <tr>
                        <th>Claim ID</th>
                        <th>Date Submitted</th>
                        <th>Hours</th>
                        <th>Total Amount</th>
                        <th>Status</th>
                        <th>Feedback</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- SAMPLE DATA FOR THE PROTOTYPE -->
                    <tr>
                        <td>1001</td>
                        <td>01 Sept 2025</td>
                        <td>40</td>
                        <td>R 12,000.00</td>
                        <td><span class="badge bg-success">Approved</span></td>
                        <td><button class="btn btn-sm btn-outline-secondary" disabled>View</button></td>
                    </tr>
                    <tr>
                        <td>1002</td>
                        <td>15 Sept 2025</td>
                        <td>35</td>
                        <td>R 10,500.00</td>
                        <td><span class="badge bg-danger">Rejected</span></td>
                        <!-- button to open a modal to show feedback -->
                        <td><button class="btn btn-sm btn-outline-primary">View Feedback</button></td>
                    </tr>
                    <tr>
                        <td>1003</td>
                        <td>02 Oct 2025</td>
                        <td>45</td>
                        <td>R 13,500.00</td>
                        <td><span class="badge bg-warning">Submitted</span></td>
                        <td><button class="btn btn-sm btn-outline-secondary" disabled>View</button></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
}
else if (userRole == "Coordinator" || userRole == "Manager")
{
    <!-- COORDINATOR/MANAGER DASHBOARD -->
    <div class="row">
        <div class="col-12">
            <h3>Claims Requiring Your Approval</h3>
            <table class="table table-striped table-hover">
                <thead class="table-dark">
                    <tr>
                        <th>Claim ID</th>
                        <th>Lecturer Name</th>
                        <th>Date Submitted</th>
                        <th>Hours</th>
                        <th>Total Amount</th>
                        <th>Documents</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- SAMPLE DATA FOR THE PROTOTYPE -->
                    <tr>
                        <td>1003</td>
                        <td>Dr. Sarah Smith</td>
                        <td>02 Oct 2025</td>
                        <td>45</td>
                        <td>R 13,500.00</td>
                        <td><button class="btn btn-sm btn-info">View (2)</button></td>
                        <td>
                            <button class="btn btn-sm btn-success">Approve</button>
                            <button class="btn btn-sm btn-danger" data-bs-toggle="modal" data-bs-target="#rejectModal">Reject</button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- Rejection Feedback Modal (Bootstrap) -->
    <div class="modal fade" id="rejectModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Reject Claim #1003</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>Please provide a reason for rejection for <strong>Dr. Sarah Smith</strong>.</p>
                    <div class="form-group">
                        <label for="feedbackComment">Feedback/Comment:</label>
                        <textarea class="form-control" id="feedbackComment" rows="3" placeholder="E.g., Hours claimed exceed the contracted limit."></textarea>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary">Submit Rejection</button>
                </div>
            </div>
        </div>
    </div>
}